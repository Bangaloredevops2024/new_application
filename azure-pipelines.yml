pool: new_app_agent

trigger: none

# stages:stage
stages:
- stage: terraforminit 
  displayName: terraform init
  pool: new_agent_pool

  # jobs:job
  jobs:
  - job: terrafrminit
    displayName: terraform init 
    # steps:task
    steps:
    - task: TerraformTask@5
      inputs:
        provider: 'azurerm'
        command: 'init'
        workingDirectory: '$(System.DefaultWorkingDirectory)/environment/dev'
        backendServiceArm: 'new_app_srv_connection'
        backendAzureRmStorageAccountName: 'pundeostg'
        backendAzureRmContainerName: 'pkcontainer'
        backendAzureRmKey: 'terraform.tfstate'
    - task: TerraformTask@5
      inputs:
        provider: 'azurerm'
        command: 'plan'
        environmentServiceNameAzureRM: 'new_app_srv_connection'




# trigger:
# - main

# pool: 
#   vmImage: ubuntu-latest

# stages:
# - stage: CI
#   jobs:
#   - job: CIWork
#     steps:
#     - script: "Do CI work"

# - stage: Test
#   jobs:
#   - job: TestWork
#     steps:
#     - script: "Do test work"